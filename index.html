<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" >
    <link href="/css/dropzone/dropzone.css" rel="stylesheet">
    <script src="/js/bootstrap.bundle.min.js"  type="text/javascript"></script>
    <script src="/js/index.js"  type="text/javascript"></script>
    <script src="/js/dropzone/dropzone.min.js" type="text/javascript"></script>
    <style>
        .change-source{
            box-shadow: 0 0 0 3px transparent,rgba(0, 0, 0, 0.05) 0 2px 4px 0 inset;
        }
        .btn-change{
            width: 90%;
            height: 90%;
            background:linear-gradient(to bottom right,#ffedd5,#fb923c);
            color:#ea580c;
            font-weight:bold;
            border-color: #ffedd5;
        }
        .time-progress {
            position: absolute;
            padding: 0;
            right: 19px;
            font-style: italic;
        }
    </style>

</head>
<body>

<div class="container py-3">
    <header>
        <div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" class="me-2" viewBox="0 0 118 94" role="img"><title>Bootstrap</title><path fill-rule="evenodd" clip-rule="evenodd" d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z" fill="currentColor"></path></svg>
                <span class="fs-4">Pricing example</span>
            </a>

            <nav class="d-inline-flex mt-2 mt-md-0 ms-md-auto">
                <a class="me-3 py-2 text-dark text-decoration-none" href="#">Features</a>
                <a class="me-3 py-2 text-dark text-decoration-none" href="#">Enterprise</a>
                <a class="me-3 py-2 text-dark text-decoration-none" href="#">Support</a>
                <a class="py-2 text-dark text-decoration-none" href="#">Pricing</a>
            </nav>
        </div>

        <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
            <h1 class="display-4 fw-normal">歌声转换</h1>
            <p class="fs-5 text-muted">11111111111111111111111111111111111111</p>
        </div>
    </header>

    <main>
        <div class="card">
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-upload-audio-tab" data-bs-toggle="tab" data-bs-target="#nav-upload-audio" type="button" role="tab" aria-controls="nav-home" aria-selected="true">音频文件上传</button>
                    <button class="nav-link" id="nav-record-audio-tab" data-bs-toggle="tab" data-bs-target="#nav-record-audio" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">录音录制上传</button>
                </div>
            </nav>
            <div class="card-body row tab-content" id="nav-tabContent">
                <div class="mb-3 col-8 tab-pane fade show active" id="nav-upload-audio" role="tabpanel" aria-labelledby="nav-upload-audio-tab" tabindex="0">
                    <div class="dropzone" id="uploadAudio"></div>
                    <br>
                    <audio id="audioPlayer" controls style="display: none; width: 90%"></audio>
                </div>

                <div class="mb-3 col-8 tab-pane fade" id="nav-record-audio" role="tabpanel" aria-labelledby="nav-record-audio-tab" tabindex="0">
                    <button class="btn btn-success" id="record" onclick="getMedia()" style="width: 50%">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic microphone" viewBox="0 0 16 16">
                            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"/>
                            <path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0v5zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3z"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic-fill microphone" viewBox="0 0 16 16" style="display: none">
                            <path d="M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"/>
                            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"/>
                        </svg>
                    </button>
                    <audio id="recordPlayer" controls style="display: none; width: 50%"></audio>
                </div>

                <div class="col-4">
                    <button class="btn btn-primary btn-change" type="button" id="Conversion">
                        转换
                    </button>
                </div>
            </div>
        </div>
        <br>
        <div class="card" style="height: 150px">
            <div class="card-header">
                OUTPUT
            </div>
            <div class="card-body">
                <div class="progress" id="changeProgressBar" role="progressbar" aria-label="Example 20px high" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="height: 100%" >
                    <div class="progress-bar" style="width: 0%; background-color: #dee2e6;"></div>
                    <div class="time-progress" id="timeProgress" style=" display: none;"></div>
                </div>
                <audio id="changeAudioPlayer" controls style="height: 100%;width: 50%;display: none"></audio>
            </div>
        </div>
        <br>
        <div class="card">
            <div class="card-body">
                <div class="mb-3">
                    <label for="outputFormFile" class="form-label">选择要输出的目录</label>
                    <input class="form-control change-source" onchange="triggerFile(event)" type="file" id="outputFormFile" webkitdirectory>
                </div>
            </div>
        </div>
    </main>

    <footer class="pt-4 my-md-5 pt-md-5 border-top">
    </footer>
</div>



<script>
    const dropzone = new Dropzone("div#uploadAudio", {
        url: "#" ,
        method:"post",
        acceptedFiles:"audio/mpeg, audio/wav, audio/flac",
        dictDefaultMessage:"点击或拖动上传音频文件",
        init:function (){
            this.on("addedfile", function(file) {
                console.log(file);
                var audioPlayer = document.getElementById('audioPlayer');

                // 清除之前的URL，如果有的话
                audioPlayer.src = '';

                // 检查是否选择了文件
                if (file) {
                    // 创建一个URL对象，用于读取文件
                    var fileURL = URL.createObjectURL(file);
                    audioPlayer.src = fileURL;
                    // 启用播放
                    audioPlayer.style.display='';
                } else {
                    // 如果没有选择文件，禁用播放按钮
                    audioPlayer.style.display='none';
                }
            });
        }
    });
</script>

</body>

</html>